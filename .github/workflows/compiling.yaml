name: ü™ü üõ†Ô∏è üíΩ
on: push
jobs:

  building:
    name: build executable
    runs-on: windows-latest
    defaults:
      run:
        shell: powershell
    steps:

    - uses: actions/checkout@v3

    - name: Install MSVC 2013 (v12.0)
      run: |
        Invoke-WebRequest -Uri http://download.microsoft.com/download/9/B/B/9BB1309E-1A8F-4A47-A6C5-ECF76672A3B3/BuildTools_Full.exe -OutFile BuildTools_Full.exe
        Start-Process -FilePath BuildTools_Full.exe -ArgumentList "/quiet", "/norestart" -Wait -PassThru
        $env:PATH = 'C:\Program Files (x86)\MSBuild\12.0\Bin\;' + $env:PATH
        [Environment]::SetEnvironmentVariable('PATH', $env:PATH, [EnvironmentVariableTarget]::Machine);

    - run: msbuild syringe.sln /p:Configuration=Release

    - uses: actions/upload-artifact@v3
      with:
        path: syringe.exe
